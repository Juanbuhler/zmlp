<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <link rel="icon" href="../../favicon.ico"/>

    <title>Zorroa Archivist</title>

    <link href="/webjars/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/webjars/startbootstrap-sb-admin-2/1.0.8-1/css/sb-admin-2.css" rel="stylesheet"/>
    <link href="/webjars/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!--<link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet"> -->

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="/assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="/webjars/jquery/1.11.3/jquery.min.js"></script>
    <script src="/webjars/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>

<body>
<div id="wrapper">

    <!-- Navigation -->
    <nav class="navbar navbar-inverse" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/gui">Zorroa Platform</a>
        </div>
        <ul class="nav navbar-top-links navbar-right">
            <li><a href="/gui/status"><span id="health" class="label label-warning">UP</span></a></li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-tasks fa-fw"></i><i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-tasks">
                    <th:block th:each="ingest: ${stdIngests}">
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong th:text="${ingest.name}"></strong>
                                    <span class="pull-right text-muted"></span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div th:if="${ingest.errorCount != 0}">
                                        <div class="progress progress-striped active">
                                            <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="40"
                                                 aria-valuemin="5" aria-valuemax="100" th:style="${'width:' + ingest.progress + '%'}">
                                                <th:block th:text="${ingest.createdCount + ' created - ' + ingest.errorCount + ' errors'}"></th:block>
                                            </div>
                                        </div>
                                    </div>
                                    <div th:if="${ingest.errorCount == 0}">
                                        <div class="progress progress-striped active">
                                            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40"
                                                 aria-valuemin="5" aria-valuemax="100" th:style="${'width:' + ingest.progress + '%'}">
                                                <th:block th:text="${ingest.createdCount + ' created - ' + ingest.errorCount + ' errors'}"></th:block>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    </th:block>
                    <li>
                        <a class="text-center" href="/gui/ingests">
                            <strong>All Ingests</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-tasks -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-bell fa-fw"></i>  <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-alerts">
                    <th:block th:each="event: ${stdEvents.aggregations.type}">
                        <li>
                            <a th:href="${'/gui/events?type=' + event.key}">
                                <div>
                                    <i class="fa fa-archive fa-fw"></i><th:block th:text="${event.key + '   (' + event.value + ')'}"></th:block>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                    </th:block>
                    <li>
                        <a class="text-center" href="/gui/events">
                            <strong>All Events</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-alerts -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="fa fa-user fa-fw"></i>  <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-user">
                    <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                    </li>
                    <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                    </li>
                    <li class="divider"></li>
                    <li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                    </li>
                </ul>
                <!-- /.dropdown-user -->
            </li>
            <!-- /.dropdown -->
        </ul>
        <div class="navbar-default sidebar" role="navigation">
            <div class="sidebar-nav navbar-collapse">
                <ul class="nav" id="side-menu">
                    <li>
                        <a href="/gui"><i class="fa fa-dashboard fa-fw"></i> Dashboard</a>
                    </li>
                    <li>
                        <a href="#"><i class="fa fa-database fa-fw"></i> Assets</a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="/gui/assets"><i class="fa fa-file-image-o fa-fw"></i> Search</a>
                            </li>
                            <li>
                                <a href="/gui/imports"><i class="fa fa-archive fa-fw"/>Imports</a>
                            </li>
                            <li>
                                <a href="/gui/ingests"><i class="fa fa-calendar fa-fw"/>Ingests</a>
                            </li>
                            <li>
                                <a href="/gui/exports"><i class="fa fa-download fa-fw"/>Exports</a>
                            </li>
                            <li>
                                <a href="/gui/pipelines"><i class="fa fa-cogs fa-fw"/>Pipelines</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#"><i class="fa fa-shield fa-fw"></i> Security<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="/gui/users"><i class="fa fa-users fa-fw"/>Users</a>
                            </li>
                            <li>
                                <a href="/gui/permissions"><i class="fa fa-lock fa-fw"/>Permissions</a>
                            </li>
                            <li>
                                <a href="/gui/folders"><i class="fa fa-folder fa-fw"/>Folders</a>
                            </li>
                        </ul>
                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a href="#"><i class="fa fa-cloud fa-fw"></i> Cluster<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="/gui/status"><i class="fa fa-exclamation-triangle fa-fw"/>Status</a>
                            </li>
                            <li>
                                <a href="/gui/analysts"><i class="fa fa-server fa-fw"/>Analysts</a>
                            </li>
                            <li>
                                <a href="/gui/plugins"><i class="fa fa-plug fa-fw"/>Plugins</a>
                            </li>
                            <li>
                                <a href="/gui/fields"><i class="fa fa-list fa-fw"/>Fields</a>
                            </li>
                            <li>
                                <a href="/gui/events"><i class="fa fa-bell fa-fw"/>Events</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- /.sidebar-collapse -->
        </div>
    </nav>

    <div id="page-wrapper"  style="margin-left: 220px; padding-right: 0px;">
        <section layout:fragment="content">
            <p>Page content goes here</p>
        </section>
    </div>
    <!-- END CONTENT -->
</div>

<script th:inline="javascript" type="text/javascript">
    //<![CDATA[
    $(document).ready(function(e) {
        var health = $("#health");
        $.ajax({
            url: '/health',
            method: 'get',
            dataType: 'json',
            success: function (d) {
                if (d["status"] == "UP") {
                    health.attr("class", "label label-success");
                    health.text("UP");
                }
                else {
                    health.attr("class", "label label-danger");
                    health.text("WARNING");
                }
            },
            error: function (request, status, error) {
                health.attr("class", "label label-danger");
                health.text("WARNING");
            }});
    });
    //]]>
</script>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Just to make our placeholder images work. Don't actually copy the next line! -->
<script src="/assets/js/vendor/holder.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="/assets/js/ie10-viewport-bug-workaround.js"></script>


</body>
</html>

