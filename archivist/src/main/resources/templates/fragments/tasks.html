<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout" xmlns:th="http://www.thymeleaf.org">
<head></head>
<body>


<div th:fragment="state_label">
    <th:block th:if="${imp.state.name()} eq 'Waiting'">
        <span class="label label-primary">Waiting</span>
    </th:block>
    <th:block th:if="${imp.state.name()} eq 'Queued'">
        <span class="label label-primary">Queued</span>
    </th:block>
    <th:block th:if="${imp.state.name()} eq 'Success'">
        <span class="label label-success">Success</span>
    </th:block>
    <th:block th:if="${imp.state.name()} eq 'Failure'">
        <span class="label label-danger">Cancelled</span>
    </th:block>
</div>

<div th:fragment="task_table">
    <table id="table" class="table table-striped table-hover table-condensed">
        <thead>
        <tr>
            <th>Id</th>
            <th>Execute</th>
            <th>State</th>
            <th>Duration</th>
            <th>Host</th>
        </tr>
        </thead>
        <tbody>
        <tr class="clickable-row" th:attr="data-href=${'/gui/imports/' + task.jobId + '/tasks/' + task.taskId}" th:each="task: ${tasks}">
            <td class="vert-align" th:text="${task.taskId}"></td>
            <td class="vert-align" th:text="${task.execute}"></td>
            <td class="vert-align" th:text="${task.state.name()}">
                <div th:include="fragments/tasks :: state_label"/>
            </td>
            <td class="vert-align" th:text="${task.duration()}"></td>
            <td class="vert-align" th:text="${task.host}"></td>
        </tr>
        </tbody>
    </table>
    <div class="container-fluid">
        <div th:include="fragments/table :: pager"/>
    </div>
    <div th:include="fragments/table :: clickable"/>
</div>


</body>
</html>
